{
  "name": "devorb",
  "displayName": "DevOrb",
  "description": "Your dev environment remembers across machines",
  "version": "1.0.0",
  "publisher": "jimseiwert",
  "author": {
    "name": "Jim Seiwert"
  },
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/jimseiwert/dev-orb-extension.git"
  },
  "bugs": {
    "url": "https://github.com/jimseiwert/dev-orb-extension/issues"
  },
  "homepage": "https://github.com/jimseiwert/dev-orb-extension#readme",
  "keywords": [
    "developer",
    "productivity",
    "tools",
    "environment"
  ],
  "engines": {
    "vscode": "^1.74.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "extensionDependencies": [
    "vscode.git"
  ],
  "main": "./out/extension.js",
  "icon": "icon.png",
  "contributes": {
    "commands": [
      {
        "command": "devOrb.refreshEnvironment",
        "title": "Refresh Environment Variables",
        "icon": "$(refresh)"
      },
      {
        "command": "devOrb.syncAllEnvironment",
        "title": "Sync All Environment Variables",
        "icon": "$(sync)"
      },
      {
        "command": "devOrb.syncEnvironmentVariable",
        "title": "Sync Variable",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "devOrb.signUp1Password",
        "title": "Sign Up for 1Password",
        "icon": "$(globe)"
      },
      {
        "command": "devOrb.setup1Password",
        "title": "DevOrb: Setup 1Password Integration",
        "icon": "$(settings-gear)"
      },
      {
        "command": "devOrb.setServiceAccountToken",
        "title": "DevOrb: Set 1Password Service Account Token",
        "icon": "$(key)"
      },
      {
        "command": "devOrb.clearServiceAccountToken",
        "title": "DevOrb: Clear 1Password Service Account Token",
        "icon": "$(trash)"
      },
      {
        "command": "devOrb.selectVault",
        "title": "DevOrb: Select 1Password Vault",
        "icon": "$(database)"
      },
      {
        "command": "devOrb.syncEnvironmentFile",
        "title": "Sync Environment File",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "devOrb.createMissingEnvFiles",
        "title": "Create Missing Environment Files",
        "icon": "$(file-add)"
      },
      {
        "command": "devOrb.openSettings",
        "title": "DevOrb: Open Settings",
        "icon": "$(gear)"
      },
      {
        "command": "devOrb.downloadEnvironmentFile",
        "title": "Download from 1Password",
        "icon": "$(cloud-download)"
      },
      {
        "command": "devOrb.refreshSyncStatus",
        "title": "DevOrb: Refresh & Sync Environment Files",
        "icon": "$(refresh)"
      }
    ],
    "configuration": [
      {
        "title": "DevOrb",
        "order": 1,
        "properties": {
          "devOrb.enabled": {
            "type": "boolean",
            "default": true,
            "description": "Enable DevOrb",
            "order": 1
          },
          "devOrb.autoSync": {
            "type": "boolean",
            "default": true,
            "markdownDescription": "Automatically sync when files change. Only applies if `#devOrb.enabled#` is enabled.",
            "enablement": "devOrb.enabled",
            "order": 2
          },
          "devOrb.secretProvider": {
            "type": "string",
            "order": 3,
            "enum": [
              "1password"
            ],
            "markdownEnumDescriptions": [
              "Store environment files in *1Password*"
            ],
            "enumItemLabels": [
              "1Password"
            ],
            "default": "1password",
            "description": "What provider to use for storing environment files"
          }
        }
      },
      {
        "title": "Environment Files",
        "order": 2,
        "properties": {
          "devOrb.env.enabled": {
            "type": "boolean",
            "default": true,
            "description": "Enable environment variable syncing via 1Password",
            "enablement": "config.devOrb.enabled"
          },
          "devOrb.env.secretPrefix": {
            "type": "string",
            "default": "",
            "markdownDescription": "**Optional prefix** for 1Password items. Supports VS Code variables like `${workspaceFolderBasename}` or `${env:USER}`. Leave empty for no prefix.",
            "pattern": "^([a-zA-Z0-9_\\-${}\\.]+|)$",
            "patternErrorMessage": "Prefix must contain only letters, numbers, underscores, hyphens, and VS Code variables",
            "enablement": "config.devOrb.enabled && config.devOrb.env.enabled"
          },
          "devOrb.env.autoSync": {
            "type": "boolean",
            "default": true,
            "markdownDescription": "**Automatically sync** environment variables when .env files change. When enabled, changes to .env files are automatically synced with 1Password.",
            "enablement": "config.devOrb.enabled && config.devOrb.env.enabled"
          },
          "devOrb.env.autoCreateFiles": {
            "type": "boolean",
            "default": true,
            "markdownDescription": "**Automatically create missing .env files** from 1Password secrets when the extension starts.",
            "enablement": "config.devOrb.enabled && config.devOrb.env.enabled"
          }
        }
      },
      {
        "title": "1Password",
        "order": 3,
        "properties": {
          "devOrb.env.onePassword.serviceAccountToken": {
            "type": "string",
            "markdownDescription": "üîê **1Password Service Account Token** (starts with `ops_`)\n\nüìù **How to use:** Paste your token here and save settings. It will be automatically moved to secure storage and this field will be cleared.\n\nüîó **Get a token:** Create a Service Account at [1Password Developer Console](https://developer.1password.com/docs/service-accounts/)",
            "default": "",
            "pattern": "^(ops_.*|)$",
            "patternErrorMessage": "Service Account Token must start with 'ops_' or be empty",
            "enablement": "config.devOrb.enabled && config.devOrb.env.enabled"
          },
          "devOrb.env.onePassword.tokenStatus": {
            "type": "string",
            "markdownDescription": "**Token Status** - Shows whether a Service Account Token is currently stored securely",
            "default": "‚ùå No token configured",
            "readOnly": true,
            "enablement": "false"
          },
          "devOrb.env.onePassword.vaultId": {
            "type": "string",
            "markdownDescription": "**1Password Vault ID** for environment variables  \n\nüí° **Tip:** Use the command `DevOrb: Select 1Password Vault` to browse and choose from your available vaults",
            "enablement": "config.devOrb.enabled && config.devOrb.env.enabled"
          }
        }
      }
    ],
    "menus": {
      "commandPalette": [
      ],
      "explorer/context": [
        {
          "command": "devOrb.syncEnvironmentFile",
          "when": "resourceExtname == .env || resourceFilename =~ /^\\.env\\./ || resourceFilename =~ /\\.env$/",
          "group": "devOrb@1"
        },
        {
          "command": "devOrb.downloadEnvironmentFile",
          "when": "resourceExtname == .env || resourceFilename =~ /^\\.env\\./ || resourceFilename =~ /\\.env$/",
          "group": "devOrb@2"
        },
        {
          "command": "devOrb.refreshSyncStatus",
          "when": "explorerResourceIsFolder",
          "group": "devOrb@3"
        }
      ]
    },
    "keybindings": [
      {
        "command": "devOrb.refreshSyncStatus",
        "key": "ctrl+alt+r",
        "mac": "cmd+alt+r",
        "when": "!terminalFocus"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "package": "vsce package",
    "publish": "vsce publish"
  },
  "dependencies": {
    "@1password/sdk": "^0.3.1",
    "node-fetch": "^2.7.0"
  },
  "devDependencies": {
    "@types/node": "16.x",
    "@types/node-fetch": "^2.6.13",
    "@types/vscode": "^1.74.0",
    "typescript": "^4.9.4",
    "vsce": "^2.15.0"
  }
}